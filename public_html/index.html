<!DOCTYPE html>
<html>
    <head>
        <title>MacPan</title>
        <link rel="shortcut icon" href="small_ghost_icon.ico">
        <link rel="stylesheet" href="stylesheet.css">
    </head>
    <body>
        <script src="createField.js"></script>
        <script src="player.js"></script>
        <script src="ghostAI.js"></script>
        <script src="score.js"></script>
        <script src="timer.js"></script>
        <script src="ghostGen.js"></script>
        
        <script>
            var player;
            var ghosts = [];
            var size = 10;
            var x;
            var t;
            var t2;
            var coins = [];
            var clock;
            var start_time;
            var t3;
            
            
            player = new PlayerCharacter("default", 10, 50, 50);
            ghosts[0] = new ghost("ghost1", 500, 500, 5, 100);
            
            clock = new timer(100);

            
            function randomPoint(){
                var r = Math.floor(Math.random()*4);
                if(r === 1){
                    var rand = Math.floor(Math.random()*100);
                var val;
                if(rand >= 90){
                    val = 10;
                } else if(rand < 90 && rand >= 70){
                    val = 5;
                } else if(rand < 70 && rand >= 40){
                    val = 3;
                } else if(rand < 40 && rand >= 20){
                    val = 2;
                } else {
                    val = 1;
                }
                coins[coins.length] = new coin(val).place();
                }                
            }
            
            document.addEventListener("keydown", windowKeyPress, false);
            function windowKeyPress(e){
                var k = e.keyCode;
                if(k === 37 || k === 38 || k === 39 || k === 40){
                    player.move(k, coins);
                } else {
                    //probably do nothing
                }
                player.loadCharacter();
            }
            
            window.onload = function(){
                createField(size);
                player.loadCharacter();
                ghosts[0].loadGhost();
                t = setInterval(ghosts[0].move, ghosts[0].freq, ghosts[0], player);
                t2 = setInterval(randomPoint, 750);
                clock.start();
                clock.getDisplayTime();
            };
        </script>
        <div id="score" class="top"></div>
        <div id="time" class="top"></div>
        <div id="game_text" class="top"></div>
    </body>
</html>